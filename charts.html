<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>EPI-LENS Data Explorer</title>
    <link rel="stylesheet" href="charts.css">
</head>
<body>
    <div class="charts-container">
        <header>
            <h2>EPI-LENS Data Explorer</h2>
            <div>
                <button id="addChartBtn">Add Chart</button>
                <button id="exportAllChartsBtn">Export All Charts</button>
            </div>
        </header>
        <div id="chartsArea"></div>
        <div id="playbackControls" class="playback-controls">
            <button id="playBtn">▶</button>
            <button id="pauseBtn">⏸</button>
            <input type="range" id="seekBar" min="0" max="100" value="0" step="1">
            <span id="playbackTime">0 / 0</span>
        </div>
    </div>
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h3>Add Chart</h3>
            <form id="addChartForm" style="display:flex;flex-direction:column;gap:18px;">
                <div>
                    <label for="xAxisSelect" style="font-weight:bold;">X Axis:</label>
                    <input id="xAxisSearch" type="text" placeholder="Search X axis..." style="width:98%;margin:6px 0 0 0;padding:4px 8px;border-radius:3px;border:1px solid #444;background:#181818;color:#fff;">
                    <select id="xAxisSelect" size="6" style="width:100%;margin-top:4px;"></select>
                </div>
                <div>
                    <label for="yAxisSelect" style="font-weight:bold;">Y Axis:</label>
                    <input id="yAxisSearch" type="text" placeholder="Search Y axes..." style="width:98%;margin:6px 0 0 0;padding:4px 8px;border-radius:3px;border:1px solid #444;background:#181818;color:#fff;">
                    <div id="yAxisSelectContainer" style="max-height:140px;overflow-y:auto;border:1px solid #444;border-radius:3px;background:#181818;padding:4px 0;"></div>
                    <div style="font-size:12px;color:#aaa;margin-top:2px;">Select one or more metrics for Y axis</div>
                </div>
                <div style="display:flex;justify-content:flex-end;gap:10px;">
                    <button type="button" id="createChartBtn">Create</button>
                    <button type="button" id="closeModalBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    <div id="exportOptionsModal" class="modal hidden">
        <div class="modal-content">
            <h3>Export Options</h3>
            <div style="margin: 16px 0;">
                <p>Select export formats:</p>
                <div style="display: flex; flex-direction: column; gap: 10px; margin: 12px 0;">
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="exportCSVOption" checked>
                        <span style="margin-left: 8px;">CSV (.csv)</span>
                    </label>
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="exportJSONOption" checked>
                        <span style="margin-left: 8px;">JSON (.json)</span>
                    </label>
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="exportNDJSONOption" checked>
                        <span style="margin-left: 8px;">NDJSON (.ndjson)</span>
                    </label>
                </div>
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 16px;">
                <button id="exportSelectedFormatsBtn">Export</button>
                <button id="cancelExportBtn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="charts-helpers.js"></script>
    <script src="tooltip-helpers.js"></script>
    <script src="metric-color-helpers.js"></script>
    <script src="charts.js"></script>
</body>
</html>